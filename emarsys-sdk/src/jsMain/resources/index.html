<html lang="en">
<head>
    <title>Emarsys SDK demo</title>
    <!--    <script src="emarsys-sdk-html.js"></script>-->
    <script src="emarsys-sdk-loader.js"></script>
</head>
<body>
<div style="display: flex; gap:1rem; flex-wrap:no-wrap">
    <div style="flex: 1;">
        <button type="button" id="button-sdk-test">Enable Tracking with <strong>sdk-test</strong>
            account
        </button>
    </div>
    <div style="flex: 1;">
        <button type="button" id="button-integration-demo">Enable Tracking with
            <strong>integration-demo</strong> account
        </button>
        <small>For testing with old push payload only</small>
    </div>
</div>
<hr>
<label>CustomEventName:
    <input id="customEventNameInput" name="customEventName" type="text">
</label>
<button type="button" id="button-custom-event">Track!</button>
<button type="button" id="button-navigate-event">Track navigate event</button>
<div style="margin-top:32px;">
    <button type="button" id="button-disable-sdk">Disable tracking in SDK</button>
</div>

<!--<div>-->
<!--    <div>-->
<!--        <h3>Test Message Item View</h3>-->
<!--        <button type="button" id="button-render-message">Render Test Message Item View</button>-->
<!--    </div>-->

<!--    <div id="TestEmbeddedMessaging" style="height:40vh"></div>-->
<!--</div>-->
<!--<div>-->
<!--    <div>-->
<!--        <h3>Test Message Item View</h3>-->
<!--        <button type="button" id="button-render-compact-view">Render Compact View</button>-->
<!--    </div>-->

<!--    <div id="TestCompactView" style="height:40vh; width:40vw"></div>-->
<!--</div>-->
<p>Detail view</p>
<div style="height:400px">
    <em-list-view custom-message-item-element-name="custom-message-item"></em-list-view>
</div>
<p>Compact view</p>
<div style="height:400px; width:300px">
    <em-compact-list-view custom-message-item-element-name="custom-message-item"></em-compact-list-view>
</div>

</body>

<script>
    let emarsys = window.Emarsys;
    document.getElementById("button-sdk-test").onclick = async () => {
<!--     const config = new window["emarsys-sdk"].EmarsysConfig(-->
<!--         "EMSA4-90136",-->
<!--         null-->
<!--     )-->

     const config = {applicationCode: "EMS11-C3FD3"};

     await emarsys.setup.enableTracking(config);
     await emarsys.contact.link("test@test.com");
     emarsys.events.on("app_event", (event) => console.log(JSON.stringify(event)));
 }

 document.getElementById("button-integration-demo").onclick = async () => {
     const config = new window["emarsys-sdk"].JsEmarsysConfig(
         "EMS04-F3514",
         null,
         null,
         new window["emarsys-sdk"].ServiceWorkerOptions(
             "BKlWDU3MxVpAEp7rjC5p9VYOhGBauYPO7K7b0117suJAoxaFzIwV4FT45eFI_hHBXgPlgKHyHDrbi1BpoKuiUww",
             "/ems-service-worker.js"
         )
     )
     await emarsys.setup.enableTracking(config);
     await emarsys.contact.link("test2@test.com");
 }

 document.getElementById("button-custom-event").onclick = async () => {
     const name = document.getElementById("customEventNameInput").value;
     await emarsys.event.trackEvent({ name: name, attributes: {"key1": "value1"}});
 }

 document.getElementById("button-navigate-event").onclick = async () => {
     await emarsys.event.trackNavigation("https://www.emarsys.com");
 }

 document.getElementById("button-disable-sdk").onclick = async () => {
     await emarsys.setup.disableTracking();
 }

 document.getElementById("button-render-message").onclick = () => {
     window["emarsys-sdk"].testEmbeddedMessaging("TestEmbeddedMessaging");
 }

 document.getElementById("button-render-compact-view").onclick = () => {
     window["emarsys-sdk"].testCompactView("TestCompactView");
 }
</script>
</html>