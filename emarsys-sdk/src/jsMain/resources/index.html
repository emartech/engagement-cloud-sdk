<html lang="en">
<head>
    <title>Emarsys SDK demo</title>
    <script src="emarsys-sdk-html.js" onload="javascript:window.alert('Base import loaded')"></script>
<!--    <script src="sdk-loader.js"></script>-->
<!--    <script type="module" src="skiko.mjs"></script>-->
</head>
<body>
<div style="display: flex; gap:1rem; flex-wrap:no-wrap">
    <div style="flex: 1;">
        <button type="button" id="button-sdk-test">Enable Tracking with <strong>sdk-test</strong>
            account
        </button>
    </div>
    <div style="flex: 1;">
        <button type="button" id="button-integration-demo">Enable Tracking with
            <strong>integration-demo</strong> account
        </button>
        <small>For testing with old push payload only</small>
    </div>
</div>
<hr>
<label>CustomEventName:
    <input id="customEventNameInput" name="customEventName" type="text">
</label>
<button type="button" id="button-custom-event">Track!</button>
<div style="margin-top:32px;">
    <button type="button" id="button-disable-sdk">Disable tracking in SDK</button>
</div>

<div>
    <div>
        <h3>Test Message Item View</h3>
        <button type="button" id="button-render-message">Render Test Message Item View</button>
    </div>

    <div id="TestEmbeddedMessaging"></div>
</div>

</body>

<script>
    let emarsys = window["emarsys-sdk"].Emarsys.getInstance();
    document.getElementById("button-sdk-test").onclick = async () => {
     const config = new window["emarsys-sdk"].JsEmarsysConfig(
         "EMSA4-90136",
         null
     )

     await emarsys.setup.enableTracking(config);
     await emarsys.contact.link("test@test.com");
     emarsys.events.on("app_event", (event) => console.log(JSON.stringify(event)));
 }

 document.getElementById("button-integration-demo").onclick = async () => {
     const config = new window["emarsys-sdk"].JsEmarsysConfig(
         "EMS04-F3514",
         null,
         null,
         new window["emarsys-sdk"].ServiceWorkerOptions(
             "BKlWDU3MxVpAEp7rjC5p9VYOhGBauYPO7K7b0117suJAoxaFzIwV4FT45eFI_hHBXgPlgKHyHDrbi1BpoKuiUww",
             "/ems-service-worker.js"
         )
     )
     await emarsys.setup.enableTracking(config);
     await emarsys.contact.link("test2@test.com");
 }

 document.getElementById("button-custom-event").onclick = async () => {
     await emarsys.event.track(document.getElementById("customEventNameInput").value);
 }

 document.getElementById("button-disable-sdk").onclick = async () => {
     await emarsys.setup.disableTracking();
 }

 document.getElementById("button-render-message").onclick = () => {
     window["emarsys-sdk"].testEmbeddedMessaging("TestEmbeddedMessaging");
 }
</script>
</html>